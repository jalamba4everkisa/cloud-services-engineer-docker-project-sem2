# Проектная работа дисциплины «Docker-контейнеризация и хранение данных»


Этот репозиторий содержит проект для курса "Docker-контейнеризация и хранение данных". Проект включает в себя контейнеризацию существующего приложения (бэкенд на Go, фронтенд на Vue.js) с использованием Docker и Docker Compose, обеспечивая безопасность образов и контейнеров.

## Структура проекта

*   `./backend/`: Содержит код бэкенд-приложения и `Dockerfile`.
*   `./frontend/`: Содержит код фронтенд-приложения и `Dockerfile`.
*   `docker-compose.yml`: Определяет сервисы для приложения.
*   `.github/workflows/deploy.yaml`: Конфигурация конвейера CI/CD (только для чтения в этом проекте).

## Начало работы

1.  **Предварительные условия:**
    *   Установлен Docker Engine.
    *   Установлен Docker Compose.

2.  **Сборка образов:**

    ```bash
    docker compose build
    ```

    Эта команда создает как фронтенд, так и бэкенд образы с использованием файла `docker-compose.yml` и соответствующих `Dockerfile`.

3.  **Запуск приложения:**

    ```bash
    docker compose up --detach
    ```

    Эта команда запускает приложение в отсоединенном режиме, позволяя ему работать в фоновом режиме.  Доступ к фронтенду по адресу `http://localhost:80` и к API бэкенда по адресу `http://localhost:8081`.

4. **Остановка приложения**

    ```bash
    docker compose down
    ```
5. **Сборка образов без docker compose**

   ```bash
    docker build -t backend ./backend
    docker build -t frontend ./frontend
    ```
    Эти команды собирают фронтенд и бэкенд образы, используя `Dockerfile` в соответствующих директориях.  `backend` и `frontend` - это теги, которые вы назначаете образам.

6. **Запуск приложения без docker compose**

    ```bash
    docker network create momo-network
    docker run -d --name backend -p 8081:8081 --network momo-network backend
    docker run -d --name frontend -p 80:80 --network momo-network frontend
    ```
    Эти команды запускают образы бэкенда и фронтенда в отсоединенном режиме, сопоставляя порты контейнера с портами хоста.

7. **Размеры образов**

| Образ  | Размер   |
| ------------- | ------------- |
| cloud-services-engineer-docker-project-sem2-backend  | 28.9 MB |
| cloud-services-engineer-docker-project-sem2-frontend  | 50 MB |

8. **Безопасность приложения**

    - Защита от перегрузки: `docker-compose.yml` содержит ограничения на использование ресурсов контейнера, чтобы предотвратить перегрузку.
    - Безопасность сетевых интерфейсов: `networks:` в `docker-compose.yml` указывает, что все контейнеры должны быть связаны с одним и тем же сетевым интерфейсом. Это гарантирует, что все контейнеры будут доступны друг другу по сети.
    - Безопасность портов: `ports:` в `docker-compose.yml` указывает, какие порты должны быть открыты для доступа к контейнерам. Это предотвращает доступ к контейнерам из вне.
    - Безопасность запуска: `restart: on-failure`, `cap_drop: ALL`, `cap_add: NET_BIND_SERVICE` в `docker-compose.yml` указывают, что все контейнеры должны быть запущены с ограниченными правами и без доступа к сетевым интерфейсам.
    - Безопасность хранения данных: `volumes:` в `docker-compose.yml` указывает, где хранятся данные контейнера. Это гарантирует, что все данные будут сохранены на диске хоста и доступны только для чтения.
    - Безопасность обновления: `deploy:` в `docker-compose.yml` указывает, как обновляются контейнеры. Это предотвращает случайные изменения в коде или конфигурации контейнера.
    - Проверка работоспособности: `healthcheck:` в `docker-compose.yml` указывает, как проверяется работоспособность контейнера. Это гарантирует, что контейнер будет автоматически перезапущен, если он не работает корректно.
    - Trivy: `trivy` используется для обнаружения уязвимостей в Docker-контейнерах и их исправлении. Это гарантирует, что контейнеры будут безопасными для использования.